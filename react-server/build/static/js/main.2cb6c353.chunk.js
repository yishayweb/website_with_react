(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){e.exports=n(239)},139:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SIGNUP",function(){return k}),n.d(a,"LOGIN",function(){return w}),n.d(a,"UPDATE_USER_CREDIT",function(){return I}),n.d(a,"signup",function(){return S}),n.d(a,"login",function(){return C}),n.d(a,"isLoggedIn",function(){return x}),n.d(a,"handleToken",function(){return L});var o=n(0),r=n.n(o),c=n(50),i=n.n(c),u=n(7),s=n(5),l=n(108),p=n(13),m=n(14),d=n(16),h=n(15),b=n(17),f=n(19),g=n.n(f),v=n(31),y=n(27),j=n(23),O=n.n(j),E=n(40),k="signup",w="login",I="update_user_credit",S=function(e,t){return function(){var n=Object(E.a)(O.a.mark(function n(a){var o;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.post("/users",e,{headers:{"Content-Type":"application/json"}});case 3:o=n.sent,console.log(o),201===o.status&&(a({type:k,payload:o.data.token}),t.push("/home"),localStorage.setItem("user_token",o.data.token)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}));return function(e){return n.apply(this,arguments)}}()},C=function(e,t){return function(){var n=Object(E.a)(O.a.mark(function n(a){var o;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.post("/users/login",e,{headers:{"Content-Type":"application/json"}});case 3:o=n.sent,console.log(o),200===o.status&&(a({type:w,payload:o.data.token}),t.push("/home"),localStorage.setItem("user_token",o.data.token)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(E.a)(O.a.mark(function t(n){var a;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(localStorage.getItem("user_token")),a={headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user_token")}},g.a.get("/users/me",a).then(function(t){var n=t.data;200===t.status&&(console.log(n),e(!0))}).catch(function(t){console.log(t),e(!1)});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(E.a)(O.a.mark(function t(n){var a,o;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user_token")}},t.next=3,g.a.post("/users/stripe",e,a);case 3:o=t.sent,n({type:I,payload:o.data});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},T=n(109),_=n.n(T),A=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(_.a,{name:"Yishay On Web",description:"$1 for 5 email credits",amount:100,token:function(t){return e.props.handleToken(t)},stripeKey:"pk_test_9ZPoxcTKevvu1UY9YmFZkTzH002XSSHcdc"},r.a.createElement("button",{className:"btn"},"Add Credits"))}}]),t}(o.Component),F=Object(u.b)(null,a)(A),z=(n(139),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={isLoggedIn:"unknown"},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.props.isLoggedIn(function(t){return e.loginValidatorCallback(t)})},1e3)}},{key:"componentDidUpdate",value:function(e,t){t.isLoggedIn&&!this.state.isLoggedIn&&this.props.history.push("/")}},{key:"loginValidatorCallback",value:function(e){e?this.setState({isLoggedIn:!0}):this.props.history.push("/")}},{key:"logOut",value:function(){var e=this,t={headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user_token")}};g.a.get("/users/logout",t).then(function(t){var n=t.data;200===t.status&&(console.log(n),e.setState({isLoggedIn:!1}))}).catch(function(e){console.log(e)})}},{key:"sendEmail",value:function(){var e={headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user_token")}};g.a.post("/users/sendEmail",{},e).then(function(e){var t=e.data;200===e.status&&console.log(t)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return console.log(this.props.user),"unknown"===this.state.isLoggedIn?r.a.createElement("div",{className:"landing-main-div"},"Loading..."):r.a.createElement("div",{className:"landing-main-div"},"Landing",r.a.createElement("button",{onClick:function(){return e.sendEmail()}},"Send Email"),r.a.createElement("button",{onClick:function(){return e.logOut()}},"Log Out"),r.a.createElement(F,null))}}]),t}(o.Component));var J=Object(u.b)(function(e){return{user:e.user}},{isLoggedIn:x})(z),N=n(241),U=n(240),Y=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,c=o.touched,i=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{type:a,placeholder:n})),c&&i&&r.a.createElement("span",null,i)))},B=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"onSubmit",value:function(e){console.log("submitted"),console.log(e),this.props.signup(e,this.props.history)}},{key:"render",value:function(){var e=this,t=this.props.handleSubmit;return r.a.createElement("form",{onSubmit:t(this.onSubmit.bind(this))},r.a.createElement(N.a,{name:"name",label:"Name",type:"text",component:Y}),r.a.createElement(N.a,{name:"email",label:"Email",type:"text",component:Y}),r.a.createElement(N.a,{name:"password",label:"Password",type:"text",component:Y}),r.a.createElement(N.a,{name:"age",label:"Age",type:"text",component:Y}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("button",{type:"button",onClick:function(){return e.props.switchForm()}},"Login")))}}]),t}(o.Component);var D=Object(U.a)({form:"signupForm",destroyOnUnmount:!1})(Object(u.b)(function(){return{}},{signup:S})(Object(y.e)(B))),M=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,c=o.touched,i=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{type:a,placeholder:n})),c&&i&&r.a.createElement("span",null,i)))},P=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"onSubmit",value:function(e){console.log("submitted"),console.log(e),this.props.login(e,this.props.history)}},{key:"render",value:function(){var e=this,t=this.props.handleSubmit;return r.a.createElement("form",{onSubmit:t(this.onSubmit.bind(this))},r.a.createElement(N.a,{name:"email",label:"Email",type:"text",component:M}),r.a.createElement(N.a,{name:"password",label:"Password",type:"text",component:M}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("button",{type:"button",onClick:function(){return e.props.switchForm()}},"Signup")))}}]),t}(o.Component);var W=Object(U.a)({form:"loginForm",destroyOnUnmount:!1})(Object(u.b)(function(){return{}},{login:C})(Object(y.e)(P))),Z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={login:!0},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.state.login?r.a.createElement(W,{switchForm:function(){return e.setState({login:!1})}}):r.a.createElement(D,{switchForm:function(){return e.setState({login:!0})}})}}]),t}(o.Component);var V=Object(u.b)(function(e){return{user:e.user}},{isLoggedIn:x})(Z),G=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"onButtonClick",value:function(){var e={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDc3YTI1ZjFkODFiYjJmMjAyODFiYWYiLCJpYXQiOjE1NjgxMjE0Mzl9._zZzaepxO2ddT8MELCJ4Mm6V9wvfniosg042xyFEPUE"}};g.a.get("/users/me",e).then(function(e){var t=e.data;200===e.status&&console.log(t)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,null,r.a.createElement("div",null,r.a.createElement(y.a,{exact:!0,path:"/",component:V}),r.a.createElement(y.a,{exact:!0,path:"/home",component:J}))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=n(55),X=n(242),H=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case w:return Object(R.a)({},e,{token:t.payload});case I:return Object(R.a)({},e,{credit:t.payload.credits});default:return e}},form:X.a}),K=Object(s.d)(H,{},Object(s.a)(l.a));i.a.render(r.a.createElement(u.a,{store:K},r.a.createElement(G,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[112,1,2]]]);
//# sourceMappingURL=main.2cb6c353.chunk.js.map